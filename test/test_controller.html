<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="../jquery-1.4.2.min.js"></script>
  <script src="../jquery.livequery.js"></script>
  <script src="../o_O.js"></script>
  <link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
<script type="text/javascript" src="qunit.js"></script>

  <script>
  o_O('ReviewsController', {
    create: function(){
      $(this).html('created!');
    },
    show: function(){
      $(this).html('shown!');
    },
    other: function(){
      $(this).html('other!');
    },
    another: function(){
      $(this).html('another!')
    }
  });

  $(document).ready(function(){
    
    module("The Reviews Controller");
    
    test('submitting an auto-bound form', 1, function(){
      $('form#myForm').trigger('submit');
      equals($('form#myForm').html(), 'created!', 'html should have been updated');
    });
    
    test('clicking an auto-bound link', 1, function(){
      $('a#myLink').trigger('click');
      equals($('a#myLink').html(), 'shown!', 'html should have been updated');
    });
    
    test('hovering a custom bound element', 1, function(){
      $('div#myDiv').trigger('mouseover');
      equals($('div#myDiv').html(), 'other!', 'html should have been updated');
    });
    
    new_element = $('<a id="anotherLink" data-controller="reviews" data-action="another">another link</a>')
    $('div#anotherDiv').append(new_element);
    
    
    setTimeout(function(){
      test("a new link", 1, function(){
        $('a#anotherLink').trigger('click');
        equals($('a#anotherLink').html(), 'another!', 'it should have some dynamic behavior');
      })
    }, 100);

    test('cleaning up', 1, function(){
      equals($('[data-temporary]').length, 0, "there shouldn't be any temporary elements left")
    })

  });
  </script>
  
</head>
<body>
  <h1 id="qunit-header">Controller Tests</h1>
 <h2 id="qunit-banner"></h2>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>
 
 <div data-id="paul">
  <form id="myForm" data-controller="reviews" data-action="create">
    test form
  </form>
  <a id="myLink" data-controller="reviews" data-action="show">
    test link
  </a>
  <div id="myDiv" data-controller="reviews" data-action="other" data-event="mouseenter">stuff</div>
  <div id="anotherDiv">
    
  </div>
 </div>
</body>
</html>